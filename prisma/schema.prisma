// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model vds_finance {
  // Anche qui, usa @db.Date se ti serve solo la data senza ora per evitare drift
  date    DateTime @id @db.Date
  income  Float    @default(0)
  outcome Float    @default(0)
}

model MonthlyPortfolio {
  // 1. CHIAVE PRIMARIA: month è l'ID univoco. 
  // Rimuovere qualsiasi riferimento a "id" nel seed perché Prisma userà "month"
  month            DateTime @id @db.Date
  
  fixedIncome      Float    @default(0)
  variableIncome   Float    @default(0)
  fixedExpenses    Float    @default(0)
  variableExpenses Float    @default(0)
  
  // Conti e Cash
  ing              Float    @default(0)
  bbva             Float    @default(0)
  revolut          Float    @default(0)
  directa          Float    @default(0)
  
  // Investimenti (Quantità)
  mwrd             Float    @default(0)
  smea             Float    @default(0)
  xmme             Float    @default(0)
  bond             Float    @default(0)
  cometa           Float    @default(0)
  
  // Crypto (Quantità)
  eth              Float    @default(0)
  sol              Float    @default(0)
  link             Float    @default(0)
  op               Float    @default(0)
  usdt             Float    @default(0)
  
  // Prezzi Asset (Cruciali per i calcoli della dashboard)
  ethPrice         Float    @default(0)
  solPrice         Float    @default(0)
  linkPrice        Float    @default(0)
  opPrice          Float    @default(0)
  mwrdPrice        Float    @default(0)
  smeaPrice        Float    @default(0)
  xmmePrice        Float    @default(0)
  
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  // 2. OTTIMIZZAZIONE: L'index su month è superfluo se month è già @id.
  // In Postgres, la Primary Key crea automaticamente un indice B-Tree.
}